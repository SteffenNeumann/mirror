:root {
	--accent-bg-soft: rgba(217, 70, 239, 0.1);
	--accent-bg: rgba(217, 70, 239, 0.15);
	--accent-bg-hover: rgba(217, 70, 239, 0.2);
	--accent-badge-bg: rgba(217, 70, 239, 0.2);
	--accent-strong: rgba(217, 70, 239, 0.6);
	--accent-strong-hover: rgba(217, 70, 239, 0.7);
	--accent-strong-active: rgba(217, 70, 239, 0.8);
	--accent-border: rgba(217, 70, 239, 0.3);
	--accent-border-strong: rgba(217, 70, 239, 0.4);
	--accent-text: rgba(253, 242, 255, 0.98);
	--accent-text-soft: rgba(244, 114, 182, 0.95);
	--accent-ring: rgba(217, 70, 239, 0.25);
	--accent-ring-strong: rgba(217, 70, 239, 0.4);
	--blockquote-border: rgba(217, 70, 239, 0.45);
	<section
		id="psPanel"
		class="flex h-full min-h-0 flex-col overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-4 shadow-soft backdrop-blur sm:p-6">
		<header class="flex items-start justify-between gap-3">
			<div>
				<h2 class="text-sm font-semibold tracking-tight">
					Personal Space
				</h2>
			</div>
			<button
				id="psCloseMobile"
				type="button"
				class="mobile-only inline-flex h-8 w-8 items-center justify-center rounded-lg border border-white/10 bg-white/5 text-slate-200 transition hover:bg-white/10 active:bg-white/15"
				title="Schließen"
				aria-label="Schließen">
				<svg
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
					class="h-4 w-4">
					<path d="M18 6L6 18" />
					<path d="M6 6l12 12" />
				</svg>
			</button>
		</header>

		<div id="psUnauthed" class="mt-4 flex-1">
			<button
				id="addPersonalSpace"
				type="button"
				class="w-full rounded-lg border border-white/10 bg-white/10 px-3 py-2 text-sm text-slate-100 transition hover:bg-white/15 active:bg-white/20">
				Add Personal Space
			</button>
			<p class="mt-2 text-xs text-slate-400">
				You’ll receive a verification link by email.
			</p>
			<div
				id="psDevLink"
				class="mt-2 hidden rounded-lg border border-white/10 bg-slate-950/30 p-2 text-xs text-slate-200"></div>
		</div>

		<div id="psAuthed" class="mt-4 hidden flex min-h-0 flex-1 flex-col">
			<div class="mt-1">
				<div class="flex items-start gap-3">
					<button
						id="psNewNote"
						type="button"
						class="inline-flex shrink-0 items-center whitespace-nowrap rounded-xl border border-fuchsia-400/30 bg-fuchsia-500/15 px-4 py-2.5 text-sm font-semibold text-slate-100 shadow-soft transition hover:bg-fuchsia-500/20 active:opacity-90">
						New note
					</button>
				</div>
			</div>
			<div id="psHint" class="mt-2 text-xs text-slate-400"></div>

			<div class="mt-4">
				<div class="flex items-center justify-between gap-2">
					<button
						id="psToggleTags"
						type="button"
						class="inline-flex items-center gap-1 text-xs font-medium text-slate-200 transition hover:text-slate-100"
						aria-expanded="true">
						<span>Tags</span>
						<svg
							data-role="chevron"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							class="h-4 w-4 text-slate-400 transition-transform">
							<path d="M6 9l6 6 6-6" />
						</svg>
					</button>
					<div id="psTagControls" class="flex items-center gap-2">
						<select
							id="psTagFilterMode"
							class="rounded-lg border border-white/10 bg-slate-950/30 px-2 py-1.5 text-xs text-slate-200 shadow-soft backdrop-blur transition focus:outline-none focus:ring-2 focus:ring-fuchsia-400/30">
							<option value="and" selected>AND</option>
							<option value="or">OR</option>
						</select>
					</div>
				</div>
				<div id="psTagsPanel" class="mt-2">
					<div class="flex flex-wrap gap-2" id="psTags"></div>
				</div>
			</div>

			<div class="mt-4 flex min-h-0 flex-1 flex-col">
				<div class="flex flex-col gap-2">
					<div class="flex items-center gap-2">
						<div class="text-xs font-medium text-slate-200">Notes</div>
						<div
							id="psCount"
							class="rounded-full border border-white/10 bg-white/5 px-2 py-0.5 text-[11px] text-slate-300"
							title="Number of notes">
							0
						</div>
					</div>
					<div class="flex items-center gap-2">
						<button
							id="psPinnedToggle"
							type="button"
							class="inline-flex h-8 w-8 items-center justify-center rounded-lg border border-white/10 bg-transparent text-slate-300 transition hover:bg-white/5 active:bg-white/10"
							title="Pinned only"
							aria-label="Pinned only"
							aria-pressed="false">
							<svg
								viewBox="0 0 24 24"
								fill="none"
								stroke="currentColor"
								stroke-width="2"
								stroke-linecap="round"
								stroke-linejoin="round"
								class="h-4 w-4">
								<path d="M4 4v16" />
								<path d="M4 4h12l-2 5 2 5H4" />
							</svg>
						</button>
						<div class="relative flex flex-1 items-center gap-2">
							<input
								id="psSearch"
								type="search"
								placeholder="Search…"
								class="w-full min-w-0 rounded-lg border border-white/10 bg-slate-950/30 px-2.5 py-1.5 text-xs text-slate-200 shadow-soft backdrop-blur transition placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-fuchsia-400/30" />
							<button
								id="psSortMenuBtn"
								type="button"
								class="inline-flex h-8 w-8 items-center justify-center rounded-lg border border-white/10 bg-transparent text-slate-300 transition hover:bg-white/5 active:bg-white/10"
								title="Sortierung"
								aria-label="Sortierung"
								aria-expanded="false">
								<svg
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"
									class="h-4 w-4">
									<circle cx="12" cy="5" r="1.5" />
									<circle cx="12" cy="12" r="1.5" />
									<circle cx="12" cy="19" r="1.5" />
								</svg>
							</button>
							<div
								id="psSortMenu"
								class="absolute right-0 top-10 z-30 hidden w-48 overflow-hidden rounded-xl border border-white/10 bg-slate-950/80 shadow-soft backdrop-blur">
								<div class="border-b border-white/10 px-3 py-2 text-[11px] text-slate-300">
									Sort by
								</div>
								<div class="flex flex-col gap-1 p-1 text-xs">
									<button
										type="button"
										data-sort="updated"
										class="ps-sort-option flex items-center justify-between rounded-lg px-2.5 py-2 text-left text-slate-200 transition hover:bg-white/5">
										<span>Modified</span>
										<span class="ps-sort-check text-fuchsia-200">✓</span>
									</button>
									<button
										type="button"
										data-sort="created"
										class="ps-sort-option flex items-center justify-between rounded-lg px-2.5 py-2 text-left text-slate-200 transition hover:bg-white/5">
										<span>Created</span>
										<span class="ps-sort-check text-fuchsia-200">✓</span>
									</button>
									<button
										type="button"
										data-sort="accessed"
										class="ps-sort-option flex items-center justify-between rounded-lg px-2.5 py-2 text-left text-slate-200 transition hover:bg-white/5">
										<span>Accessed</span>
										<span class="ps-sort-check text-fuchsia-200">✓</span>
									</button>
									<button
										type="button"
										data-sort="text"
										class="ps-sort-option flex items-center justify-between rounded-lg px-2.5 py-2 text-left text-slate-200 transition hover:bg-white/5">
										<span>Text</span>
										<span class="ps-sort-check text-fuchsia-200">✓</span>
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
				</div>
			</div>
		</div>
	</div>
			<div
					id="psList"
					class="mt-2 flex min-h-0 flex-1 flex-col gap-2 overflow-y-auto pr-1"></div>
		</div>
	</div>
	<div class="mt-auto pt-3">
		<button
			id="psSettingsBtn"
			type="button"
			class="inline-flex h-[38px] w-[38px] items-center justify-center rounded-xl border border-white/10 bg-white/5 text-xs text-slate-200 transition hover:bg-white/10 active:bg-white/15"
			aria-label="Open settings"
			title="Settings">
			<svg
				viewBox="0 0 24 24"
				fill="none"
				stroke="currentColor"
				stroke-width="2"
				stroke-linecap="round"
				stroke-linejoin="round"
				class="h-4 w-4">
				<path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z" />
				<path
					d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c0 .67.39 1.27 1 1.51H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" />
			</svg>
		</button>
	</div>
</section>
	transform: none !important;
}
.ps-note-item.ps-note-active .ps-note-actions,
.ps-note-item:hover .ps-note-actions {
	opacity: 1 !important;
	pointer-events: auto !important;
	transform: none !important;
}
.ps-note-actions {
	opacity: 0;
	pointer-events: none;
	transform: translateY(-2px);
	transition: opacity 0.2s ease, transform 0.2s ease;
}
.ps-note-item:hover .ps-note-actions,
.ps-note-item.ps-note-active .ps-note-actions {
	opacity: 1;
	pointer-events: auto;
	transform: none;
}
}
.md-content a {
	color: rgb(96 165 250);
	text-decoration: underline;
	text-underline-offset: 3px;
}
.md-content code,
.md-content pre {
	font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
		"Liberation Mono", "Courier New", monospace;
}
#mirror.pw-mask-enabled {
	color: transparent;
	caret-color: rgb(226 232 240);
}
#mirror.pw-mask-enabled::selection {
	background: rgba(217, 70, 239, 0.35);
}
#mirror.pw-mask-enabled::-moz-selection {
	background: rgba(217, 70, 239, 0.35);
}
#mirrorMask {
	white-space: pre-wrap;
	word-break: break-word;
}
#attributionOverlay {
	z-index: 5;
}
#attributionOverlayContent {
	white-space: pre-wrap;
	word-break: break-word;
}
#mirror.attribution-active {
	color: transparent;
	caret-color: rgb(226 232 240);
	background-color: transparent !important;
}
#mirror.attribution-active::selection {
	background: rgba(217, 70, 239, 0.25);
}
#mirror.attribution-active::-moz-selection {
	background: rgba(217, 70, 239, 0.25);
}
.author-span {
	border-radius: 0.35rem;
	box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.45);
	padding: 0 0.04em;
	margin: 0 -0.02em;
	box-decoration-break: clone;
	-webkit-box-decoration-break: clone;
}
#mirrorMaskContent {
	min-height: 100%;
	transform: translate(0, 0);
	will-change: transform;
}
#mirrorMaskContent .pw-editor-token {
	filter: blur(6px);
	opacity: 0.7;
}
.md-content .pw-field {
	display: inline-flex;
	align-items: center;
	gap: 0.35rem;
	padding: 0.1rem 0.45rem;
	border-radius: 999px;
	border: 1px solid rgba(255, 255, 255, 0.12);
	background: rgba(15, 23, 42, 0.6);
	font-size: 0.85em;
	line-height: 1.2;
}
.md-content .pw-mask {
	letter-spacing: 0.18em;
	font-weight: 600;
	color: rgba(226, 232, 240, 0.9);
}
.md-content .pw-value {
	display: none;
	font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
		"Liberation Mono", "Courier New", monospace;
	color: rgba(226, 232, 240, 0.95);
}
.md-content .pw-field.pw-revealed .pw-mask {
	display: none;
}
.md-content .pw-field.pw-revealed .pw-value {
	display: inline;
}
.md-content .pw-toggle,
.md-content .pw-copy {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	height: 1.4rem;
	min-width: 1.4rem;
	padding: 0 0.35rem;
	border-radius: 999px;
	border: 1px solid rgba(255, 255, 255, 0.12);
	background: rgba(255, 255, 255, 0.06);
	color: rgba(226, 232, 240, 0.9);
	font-size: 0.75rem;
	line-height: 1;
	cursor: pointer;
}
.md-content .pw-toggle:hover,
.md-content .pw-copy:hover {
	background: rgba(255, 255, 255, 0.12);
}
.md-content pre {
	overflow: auto;
	border: 1px solid rgba(255, 255, 255, 0.08);
	border-radius: 12px;
	padding: 10px;
	background: rgba(2, 6, 23, 0.6);
}
.md-content code {
	background: rgba(255, 255, 255, 0.06);
	padding: 0.1em 0.3em;
	border-radius: 0.35em;
}
.md-content pre code {
	background: transparent;
	padding: 0;
}
.md-content table {
	border-collapse: collapse;
	width: 100%;
}
.md-content th,
.md-content td {
	border: 1px solid rgba(255, 255, 255, 0.12);
	padding: 6px 8px;
}
.md-content blockquote {
	border-left: 3px solid var(--blockquote-border);
	margin: 0;
	padding: 0 12px;
	color: var(--blockquote-text);
}
.md-content ul.task-list {
	list-style: none;
	padding-left: 0;
}
.md-content ul.task-list li {
	display: flex;
	gap: 0.55rem;
	align-items: flex-start;
}
/* Keep completed todos visibly marked */
.md-content ul.task-list li.task-list-item.checked {
	opacity: 0.75;
	text-decoration: line-through;
	text-decoration-thickness: 2px;
	text-decoration-color: rgba(148, 163, 184, 0.7);
}
.md-content
	ul.task-list
	li.task-list-item.checked
	input[type="checkbox"] {
	opacity: 1;
}
.md-content ul.task-list input[type="checkbox"] {
	margin-top: 0.2rem;
	accent-color: var(--accent-strong);
}
.md-content ul li::marker,
.md-content ol li::marker {
	color: var(--accent-text-soft);
}
.mobile-only {
	display: none !important;
}
body.preview-only #editorPreviewGrid {
	grid-template-columns: 1fr !important;
}
body.preview-only #editorPreviewGrid > div:first-child {
	display: none !important;
}
@media (max-width: 1023px) {
	.mobile-only {
		display: inline-flex !important;
	}
	body.mobile-preview-open main,
	body.mobile-editor-open main,
	body.mobile-ps-open main,
	body.mobile-note-open main {
		width: 100vw;
		height: 100vh;
		margin: 0;
	}
	body.mobile-preview-open #psPanel,
	body.mobile-note-open #psPanel,
	body.mobile-ps-open #editorPanel,
	body.mobile-ps-open #previewPanel,
	body.mobile-note-open #previewPanel,
	body.mobile-editor-open #psPanel {
		display: none;
	}
	body.mobile-preview-open #previewPanel {
		position: fixed;
		inset: 0;
		width: 100vw;
		height: 100vh;
		z-index: 70;
		display: flex;
		flex-direction: column;
		pointer-events: auto;
		border-radius: 0;
	}
	body.mobile-preview-open #editorPanel > header {
		display: none;
	}
	body.mobile-preview-open #editorPreviewGrid > div:first-child {
		display: none;
	}
	body.mobile-ps-open #psPanel {
		position: fixed;
		inset: 0;
		width: 100vw;
		height: 100vh;
		z-index: 70;
		display: flex;
		flex-direction: column;
		pointer-events: auto;
		border-radius: 0;
		overflow: hidden;
	}
	body.mobile-ps-open #psList {
		overflow-y: auto;
		-webkit-overflow-scrolling: touch;
		max-height: none;
	}
	body.mobile-note-open #editorPanel,
	body.mobile-editor-open #editorPanel {
		position: fixed;
		inset: 0;
		width: 100vw;
		height: 100vh;
		z-index: 70;
		pointer-events: auto;
		border-radius: 0;
	}
	body.mobile-note-open #editorPanel > header,
	body.mobile-editor-open #editorPanel > header {
		flex: 0 0 auto;
	}
	body:not(.mobile-preview-open) #previewCloseMobile {
		display: none;
	}
	body:not(.mobile-ps-open) #psCloseMobile {
		display: none;
	}
	body:not(.mobile-note-open) #noteCloseMobile {
		display: none;
	}
	#settingsRoot {
		padding: 0;
		align-items: stretch;
		justify-content: stretch;
		z-index: 120;
	}
	#settingsPanel {
		width: 100vw;
		height: 100vh;
		max-height: none;
		border-radius: 0;
		z-index: 121;
	}
	#settingsNav {
		position: sticky;
		top: 0;
		z-index: 1;
		background: rgba(2, 6, 23, 0.85);
		backdrop-filter: blur(8px);
	}
	#settingsPanel > header {
		position: sticky;
		top: 0;
		z-index: 2;
		background: rgba(2, 6, 23, 0.85);
		backdrop-filter: blur(8px);
	}
}

.bg-fuchsia-500\/15 {
	background-color: var(--accent-bg) !important;
}
.bg-fuchsia-600\/20 {
	background-color: var(--accent-bg) !important;
}
.bg-fuchsia-500\/10 {
	background-color: var(--accent-bg-soft) !important;
}
.bg-fuchsia-500\/20 {
	background-color: var(--accent-bg-hover) !important;
}
.bg-fuchsia-600\/60 {
	background-color: var(--accent-strong) !important;
}
.hover\:bg-fuchsia-600\/70:hover {
	background-color: var(--accent-strong-hover) !important;
}
.active\:bg-fuchsia-600\/80:active {
	background-color: var(--accent-strong-active) !important;
}
.hover\:bg-fuchsia-500\/20:hover {
	background-color: var(--accent-bg-hover) !important;
}
.border-fuchsia-400\/30 {
	border-color: var(--accent-border) !important;
}
.border-fuchsia-500\/30 {
	border-color: var(--accent-border) !important;
}
.border-fuchsia-400\/40 {
	border-color: var(--accent-border-strong) !important;
}
.text-fuchsia-100 {
	color: var(--accent-text) !important;
}
.text-fuchsia-200 {
	color: var(--accent-text-soft) !important;
}
.text-fuchsia-300 {
	color: var(--accent-text-soft) !important;
}
.ring-fuchsia-400\/30 {
	--tw-ring-color: var(--accent-ring) !important;
}
.focus\:ring-fuchsia-400\/30:focus,
.focus\:ring-fuchsia-400\/25:focus {
	--tw-ring-color: var(--accent-ring) !important;
}
.focus\:ring-fuchsia-400\/40:focus,
.ring-fuchsia-400\/40 {
	--tw-ring-color: var(--accent-ring-strong) !important;
}
