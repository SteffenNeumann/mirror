<!DOCTYPE html>
<html lang="de">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="color-scheme" content="dark light" />
		<title>Mirror</title>

		<!-- Tailwind (CDN) -->
		<script src="https://cdn.tailwindcss.com"></script>
		<script>
			tailwind.config = {
				theme: {
					extend: {
						fontFamily: {
							sans: [
								"ui-sans-serif",
								"system-ui",
								"-apple-system",
								"Segoe UI",
								"Roboto",
								"Inter",
								"Arial",
								"Noto Sans",
								"sans-serif",
							],
						},
						boxShadow: {
							soft: "0 10px 30px rgba(0,0,0,.25)",
						},
					},
				},
			};
		</script>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css" />
		<style>
			.md-content {
				font-size: 0.875rem;
				line-height: 1.55;
				color: rgb(226 232 240);
			}
			.md-content a {
				color: rgb(96 165 250);
				text-decoration: underline;
				text-underline-offset: 3px;
			}
			.md-content code,
			.md-content pre {
				font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
					"Liberation Mono", "Courier New", monospace;
			}
			.md-content pre {
				overflow: auto;
				border: 1px solid rgba(255, 255, 255, 0.08);
				border-radius: 12px;
				padding: 10px;
				background: rgba(2, 6, 23, 0.6);
			}
			.md-content code {
				background: rgba(255, 255, 255, 0.06);
				padding: 0.1em 0.3em;
				border-radius: 0.35em;
			}
			.md-content pre code {
				background: transparent;
				padding: 0;
			}
			.md-content table {
				border-collapse: collapse;
				width: 100%;
			}
			.md-content th,
			.md-content td {
				border: 1px solid rgba(255, 255, 255, 0.12);
				padding: 6px 8px;
			}
			.md-content blockquote {
				border-left: 3px solid rgba(217, 70, 239, 0.45);
				margin: 0;
				padding: 0 12px;
				color: rgb(203 213 225);
			}
			.md-content ul.task-list {
				list-style: none;
				padding-left: 0;
			}
			.md-content ul.task-list li {
				display: flex;
				gap: 0.55rem;
				align-items: flex-start;
			}
			.md-content ul.task-list input[type="checkbox"] {
				margin-top: 0.2rem;
			}
		</style>
	</head>
	<body class="min-h-screen bg-slate-950 text-slate-100 antialiased">
		<div
			id="toastRoot"
			class="pointer-events-none fixed right-4 top-4 z-50 flex w-[min(92vw,420px)] flex-col gap-2"></div>
		<div class="pointer-events-none fixed inset-0 overflow-hidden">
			<div
				class="absolute -top-48 left-1/2 h-[520px] w-[520px] -translate-x-1/2 rounded-full bg-fuchsia-500/15 blur-3xl"></div>
			<div
				class="absolute -bottom-56 left-1/2 h-[520px] w-[520px] -translate-x-1/2 rounded-full bg-cyan-400/10 blur-3xl"></div>
		</div>

		<main
			class="relative mx-auto my-6 flex h-[calc(100vh-48px)] w-[calc(100vw-48px)] max-w-none items-stretch px-0 py-0 sm:my-5 sm:h-[calc(100vh-40px)] sm:w-[calc(100vw-40px)]">
			<div
				class="grid h-full w-full grid-cols-1 gap-4 lg:grid-cols-[360px_1fr]">
				<section
					class="flex h-full min-h-0 flex-col overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-4 shadow-soft backdrop-blur sm:p-6">
					<header class="flex items-start justify-between gap-3">
						<div>
							<h2 class="text-sm font-semibold tracking-tight">
								Personal Space
							</h2>
						</div>
						<button
							id="psLogout"
							type="button"
							class="hidden rounded-lg border border-white/10 bg-transparent px-3 py-2 text-xs text-slate-200 transition hover:bg-white/5 active:bg-white/10">
							Abmelden
						</button>
					</header>

					<div id="psUnauthed" class="mt-4 flex-1">
						<button
							id="addPersonalSpace"
							type="button"
							class="w-full rounded-lg border border-white/10 bg-white/10 px-3 py-2 text-sm text-slate-100 transition hover:bg-white/15 active:bg-white/20">
							Add Personal Space
						</button>
						<p class="mt-2 text-xs text-slate-400">
							Du bekommst einen Verifizierungs-Link per E-Mail.
						</p>
						<div
							id="psDevLink"
							class="mt-2 hidden rounded-lg border border-white/10 bg-slate-950/30 p-2 text-xs text-slate-200"></div>
					</div>

					<div id="psAuthed" class="mt-4 hidden flex min-h-0 flex-1 flex-col">
						<div class="text-xs text-slate-300">
							Angemeldet als
							<span id="psEmail" class="font-medium text-slate-100"></span>
						</div>

						<div class="mt-3">
							<div class="flex items-start gap-3">
								<button
									id="psNewNote"
									type="button"
									class="inline-flex shrink-0 items-center whitespace-nowrap rounded-xl border border-fuchsia-400/20 bg-gradient-to-r from-fuchsia-500/20 via-white/10 to-cyan-400/10 px-4 py-2.5 text-sm font-semibold text-slate-50 shadow-soft transition hover:from-fuchsia-500/25 hover:via-white/15 hover:to-cyan-400/15 active:opacity-90">
									Neuer Eintrag
								</button>
							</div>

							<div class="mt-2 flex flex-wrap items-center gap-2">
								<button
									id="psExportNotes"
									type="button"
									class="rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs text-slate-200 transition hover:bg-white/10 active:bg-white/15">
									Export
								</button>
								<select
									id="psImportMode"
									class="rounded-lg border border-white/10 bg-slate-950/30 px-2.5 py-2 text-xs text-slate-200 shadow-soft backdrop-blur transition focus:outline-none focus:ring-2 focus:ring-fuchsia-400/30">
									<option value="merge" selected>Merge</option>
									<option value="replace">Ersetzen</option>
								</select>
								<button
									id="psImportNotes"
									type="button"
									class="rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs text-slate-200 transition hover:bg-white/10 active:bg-white/15">
									Import
								</button>
								<input
									id="psImportFile"
									type="file"
									accept="application/json,text/markdown,text/plain,.json,.md,.markdown,.txt"
									class="hidden" />
							</div>
							<div id="psHint" class="mt-2 text-xs text-slate-400"></div>
						</div>

						<div class="mt-4">
							<div class="flex items-center justify-between gap-2">
								<button
									id="psToggleTags"
									type="button"
									class="inline-flex items-center gap-1 text-xs font-medium text-slate-200 transition hover:text-slate-100"
									aria-expanded="true">
									<span>Tags</span>
									<svg
										data-role="chevron"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										class="h-4 w-4 text-slate-400 transition-transform">
										<path d="M6 9l6 6 6-6" />
									</svg>
								</button>
								<div id="psTagControls" class="flex items-center gap-2">
									<select
										id="psTagFilterMode"
										class="rounded-lg border border-white/10 bg-slate-950/30 px-2 py-1.5 text-xs text-slate-200 shadow-soft backdrop-blur transition focus:outline-none focus:ring-2 focus:ring-fuchsia-400/30">
										<option value="and" selected>UND</option>
										<option value="or">ODER</option>
									</select>
								</div>
							</div>
							<div id="psTagsPanel" class="mt-2">
								<div class="flex flex-wrap gap-2" id="psTags"></div>
							</div>
						</div>

						<div class="mt-4 flex min-h-0 flex-1 flex-col">
							<div class="text-xs font-medium text-slate-200">Inhalte</div>
							<div
								id="psList"
								class="mt-2 flex min-h-0 flex-1 flex-col gap-2 overflow-y-auto pr-1"></div>
						</div>
					</div>
				</section>

				<section
					class="flex h-full min-h-0 w-full flex-col rounded-2xl border border-white/10 bg-white/5 p-4 sm:p-6 shadow-soft backdrop-blur">
					<header
						class="flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between">
						<div class="min-w-0">
							<div class="flex items-center gap-2">
								<div
									id="statusDot"
									class="h-2.5 w-2.5 rounded-full bg-slate-500"></div>
								<h1 class="text-lg font-semibold tracking-tight">Mirror</h1>
							</div>
							<p class="mt-1 text-sm text-slate-300">Share your thoughts</p>
							<div class="mt-4 flex flex-wrap items-center gap-2">
								<div class="relative">
									<label for="roomInput" class="sr-only">Raum</label>
									<input
										id="roomInput"
										list="roomOptions"
										class="w-44 sm:w-48 rounded-lg border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 outline-none ring-1 ring-transparent transition focus:border-white/20 focus:ring-fuchsia-400/25"
										placeholder="Raum (z.B. KubernetesRoom123)" />
									<datalist id="roomOptions"></datalist>
								</div>
								<button
									id="joinRoom"
									type="button"
									class="rounded-lg border border-white/10 bg-white/10 px-3 py-2 text-sm text-slate-100 transition hover:bg-white/15 active:bg-white/20">
									Wechseln
								</button>
								<button
									id="newRoom"
									type="button"
									class="rounded-lg border border-white/10 bg-transparent px-3 py-2 text-sm text-slate-200 transition hover:bg-white/5 active:bg-white/10">
									Neu
								</button>
								<div class="flex items-center gap-2">
									<label for="favoritesSelect" class="sr-only">Favoriten</label>
									<select
										id="favoritesSelect"
										class="w-44 sm:w-56 rounded-lg border border-white/10 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 outline-none ring-1 ring-transparent transition focus:border-white/20 focus:ring-fuchsia-400/25">
										<option value="">Favoriten…</option>
									</select>
									<button
										id="toggleFavorite"
										type="button"
										class="inline-flex h-10 w-10 items-center justify-center rounded-lg border border-white/10 bg-white/10 text-slate-100 transition hover:bg-white/15 active:bg-white/20"
										title="Als Favorit speichern/entfernen"
										aria-label="Als Favorit speichern/entfernen">
										<svg
											viewBox="0 0 24 24"
											fill="none"
											stroke="currentColor"
											stroke-width="2"
											stroke-linecap="round"
											stroke-linejoin="round"
											class="h-5 w-5">
											<path
												d="M12 17.3l-6.18 3.25 1.18-6.88L2 8.9l6.9-1L12 1.8l3.1 6.1 6.9 1-5 4.77 1.18 6.88z" />
										</svg>
									</button>
								</div>
							</div>
						</div>

						<div
							class="shrink-0 text-left text-xs text-slate-300 sm:text-right">
							<div>
								Raum:
								<span id="roomLabel" class="font-medium text-slate-100"></span>
							</div>
							<div class="mt-1">
								<button
									id="copyLink"
									type="button"
									class="rounded-md border border-white/10 bg-white/10 px-2.5 py-1.5 text-xs text-slate-100 transition hover:bg-white/15 active:bg-white/20">
									Link kopieren
								</button>
								<a
									id="shareLink"
									class="ml-2 underline decoration-white/20 underline-offset-4 hover:decoration-white/50"
									href="#"
									target="_self"
									rel="noreferrer"
									>Öffnen</a
								>
							</div>
							<div class="mt-1" id="statusText">Offline</div>
							<div class="mt-1 hidden text-slate-400" id="wsHint"></div>
						</div>
					</header>

					<div class="mt-5 flex min-h-0 flex-1 flex-col sm:mt-6">
						<div
							id="editorPreviewGrid"
							class="grid h-full min-h-0 grid-cols-1 gap-3 lg:grid-cols-1">
							<div class="flex min-h-0 min-w-0 flex-col">
								<label for="mirror" class="sr-only">Text</label>
								<div class="relative flex min-h-0 flex-1">
									<textarea
										id="mirror"
										class="h-full min-h-0 w-full resize-none rounded-xl border border-white/10 bg-slate-950/40 px-4 pt-3 pb-12 pr-11 font-sans text-base leading-relaxed text-slate-100 placeholder:text-slate-500 shadow-inner outline-none ring-1 ring-transparent transition focus:border-white/20 focus:ring-fuchsia-400/25"
										placeholder="Tippe etwas – alle mit diesem Link sehen es sofort…"
										autocomplete="off"
										spellcheck="false"></textarea>
									<button
										id="clearMirror"
										type="button"
										class="absolute right-2 top-2 inline-flex h-9 w-9 items-center justify-center rounded-lg border border-white/10 bg-white/5 text-slate-200 transition hover:bg-white/10 active:bg-white/15"
										title="Eingabe löschen"
										aria-label="Eingabe löschen">
										<svg
											viewBox="0 0 24 24"
											fill="none"
											stroke="currentColor"
											stroke-width="2"
											stroke-linecap="round"
											stroke-linejoin="round"
											class="h-4 w-4">
											<path d="M3 6h18" />
											<path d="M8 6V4h8v2" />
											<path d="M6 6l1 16h10l1-16" />
											<path d="M10 11v6" />
											<path d="M14 11v6" />
										</svg>
									</button>
									<button
										id="copyMirror"
										type="button"
										class="absolute bottom-2 right-2 inline-flex h-9 w-9 items-center justify-center rounded-lg border border-white/10 bg-white/5 text-slate-200 transition hover:bg-white/10 active:bg-white/15"
										title="In Zwischenablage kopieren"
										aria-label="In Zwischenablage kopieren">
										<svg
											viewBox="0 0 24 24"
											fill="none"
											stroke="currentColor"
											stroke-width="2"
											stroke-linecap="round"
											stroke-linejoin="round"
											class="h-4 w-4">
											<rect x="9" y="9" width="13" height="13" rx="2" />
											<path
												d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
										</svg>
									</button>
								</div>
								<div
									class="mt-3 flex flex-wrap items-center justify-between gap-2">
									<div class="flex items-center gap-2">
										<button
											id="psSaveMain"
											type="button"
											class="rounded-lg border border-white/10 bg-white/10 px-3 py-2 text-sm text-slate-100 transition hover:bg-white/15 active:bg-white/20">
											Speichern
										</button>
										<button
											id="togglePreview"
											type="button"
											class="rounded-lg border border-white/10 bg-transparent px-3 py-2 text-sm text-slate-200 transition hover:bg-white/5 active:bg-white/10">
											Preview
										</button>
										<div class="hidden items-center gap-2 sm:flex">
											<label for="codeLang" class="sr-only">Sprache</label>
											<select
												id="codeLang"
												class="w-36 rounded-lg border border-white/10 bg-slate-950/40 px-2.5 py-2 text-sm text-slate-100 outline-none ring-1 ring-transparent transition focus:border-white/20 focus:ring-fuchsia-400/25"
												title="Sprache für Codeblock">
												<option value="python">Python</option>
												<option value="javascript">JavaScript</option>
												<option value="bash">Shell</option>
												<option value="json">JSON</option>
												<option value="yaml">YAML</option>
												<option value="sql">SQL</option>
												<option value="html">HTML</option>
												<option value="css">CSS</option>
											</select>
											<button
												id="insertCodeBlock"
												type="button"
												class="rounded-lg border border-white/10 bg-transparent px-3 py-2 text-sm text-slate-200 transition hover:bg-white/5 active:bg-white/10"
												title="Codeblock mit Sprache einfügen">
												Codeblock
											</button>
										</div>
									</div>
									<div class="flex items-center gap-3 text-xs text-slate-400">
										<span id="metaLeft">Bereit.</span>
										<span id="metaRight"></span>
										<span id="psMainHint" class="hidden"></span>
									</div>
								</div>
							</div>
							<div
								id="previewPanel"
								class="hidden h-full min-h-56 sm:min-h-72 overflow-hidden rounded-xl border border-white/10 bg-slate-950/25">
								<div class="flex h-full min-h-0 flex-col">
									<div
										class="flex items-center justify-between gap-2 border-b border-white/10 bg-slate-950/30 px-3 py-2">
										<div class="text-xs font-medium text-slate-200">
											Preview
										</div>
										<div class="flex items-center gap-2">
											<button
												id="runPreview"
												type="button"
												class="rounded-md border border-white/10 bg-white/10 px-2.5 py-1.5 text-xs font-medium text-slate-100 transition hover:bg-white/15 active:bg-white/20"
												title="Code ausführen (lang-python / lang-js)">
												Run
											</button>
											<button
												id="clearRunOutput"
												type="button"
												class="rounded-md border border-white/10 bg-transparent px-2.5 py-1.5 text-xs text-slate-200 transition hover:bg-white/5 active:bg-white/10"
												title="Ausgabe löschen">
												Clear
											</button>
										</div>
									</div>
									<iframe
										id="mdPreview"
										title="Markdown Preview"
										class="min-h-0 flex-1"
										sandbox="allow-popups allow-same-origin"
										referrerpolicy="no-referrer"></iframe>
									<div
										class="border-t border-white/10 bg-slate-950/20 px-3 py-2">
										<div
											class="flex items-center justify-between gap-2 text-[11px] text-slate-300">
											<span>Ausgabe</span>
											<span id="runStatus" class="text-slate-400"></span>
										</div>
										<pre
											id="runOutput"
											class="mt-2 max-h-40 overflow-auto whitespace-pre-wrap break-words text-[12px] leading-relaxed text-slate-100"></pre>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
			</div>
		</main>

		<!-- Markdown Preview libs (client-side, no build step) -->
		<script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/markdown-it-task-lists@2.1.1/dist/markdown-it-task-lists.min.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
		<script src="/app.js?v=2026-01-14"></script>
	</body>
</html>
